# Product Overview

## Product Purpose

cchookは、Claude Codeのフック設定を簡素化するCLIツールです。従来の複雑なJSON設定やワンライナーのjqクエリの代わりに、YAML形式の設定ファイルとテンプレート構文を提供することで、以下の課題を解決します:

- **複雑なJSON設定**: 読みにくく保守が困難なJSON形式の設定
- **繰り返しのjq処理**: 複数の要素を使用する際に必要な一時ファイルと反復的なjqフィルター
- **単一行の制限**: 複数行に対応していないJSON文字列による可読性の低下

## Target Users

### Primary Users
- **Claude Code利用者**: Claude Codeを日常的に使用する開発者
- **フック活用者**: Claude Codeのフック機能をカスタマイズしたいパワーユーザー
- **チーム開発者**: 複数人でhook設定を共有・管理するチーム

### User Needs
- 読みやすく保守しやすいフック設定
- 柔軟な条件付き実行
- 設定の再利用性とテンプレート化
- ドライラン機能によるテストの容易さ

## Key Features

1. **YAML設定**:
   - 複雑なJSONの代わりに、クリーンで可読性の高いYAML形式
   - 複数行対応でコメントも記載可能

2. **テンプレートエンジン**:
   - `{.field}` シンタックスによるシンプルなJSON field アクセス
   - 完全なjqクエリサポートによる強力なデータ変換
   - クエリキャッシングによるパフォーマンス最適化

3. **条件付き実行**:
   - ファイル拡張子、コマンドパターン、プロンプトパターンなど多様な条件タイプ
   - ディレクトリや作業ディレクトリベースの条件
   - Git追跡ファイル操作の検知

4. **イベントサポート**:
   - PreToolUse, PostToolUse, SessionStart, SessionEnd, UserPromptSubmit など全てのClaude Codeイベントに対応

5. **ドライラン機能**:
   - 本番実行前に設定をテスト可能
   - `-command` フラグによる設定の検証

## Business Objectives

- **生産性の向上**: Claude Code hook設定の作成・管理時間を大幅に削減
- **エラー削減**: 複雑なJSON設定によるミスを防止し、信頼性を向上
- **ユーザー体験の改善**: シンプルで直感的な設定形式による学習コストの削減
- **コミュニティの拡大**: 使いやすさによるClaude Code hook機能の普及促進

## Success Metrics

- **ユーザー採用率**: GitHubスター数、インストール数の増加
- **設定可読性**: YAML設定がJSON設定と比較して理解しやすいというフィードバック
- **エラー率**: 設定ミスによるエラーの減少
- **コミュニティ貢献**: issueやPRの数、ユーザーからの設定例の共有

## Product Principles

1. **シンプルさ優先**:
   - 複雑な機能よりも、シンプルで理解しやすいAPIを重視
   - ユーザーが最も使う機能に焦点を当てた設計

2. **YAML-First アプローチ**:
   - JSON設定の複雑さを排除し、YAML形式での設定を標準化
   - マルチライン、コメントサポートによる保守性の向上

3. **強力なテンプレートシステム**:
   - jqの完全なクエリパワーを活用
   - シンプルな `{.field}` 構文で初心者にも優しく、高度なユースケースにも対応

4. **信頼性**:
   - 堅牢なエラーハンドリング
   - 未知の条件タイプに対する明確なエラーメッセージ
   - 包括的なテストカバレッジ

5. **開発者体験**:
   - ドライラン機能による安全なテスト
   - 詳細なドキュメントと豊富な設定例
   - XDG準拠の設定ファイルパス

## Monitoring & Visibility

cchook自体は監視ダッシュボードを持たない軽量なCLIツールですが、以下の方法でユーザーは動作を確認できます:

- **ログ出力**: アクション実行時のメッセージ出力
- **終了ステータス**: 適切な終了コードによる成功/失敗の判定
- **ドライランモード**: `-command` フラグによる実行前の動作確認
- **テンプレート展開の可視化**: シンプルなechoコマンドでテンプレート処理結果を確認可能

## Future Vision

### Potential Enhancements

- **設定バリデーション**: YAML設定の構文チェック機能
- **設定テンプレート**: 一般的なユースケース向けのプリセット設定集
- **プラグインシステム**: カスタム条件タイプやアクションタイプの追加
- **インタラクティブ設定ツール**: 対話形式での設定ファイル生成
- **統計・分析**: フック実行の頻度や成功率の追跡
- **リモート設定共有**: チームでの設定共有を容易にする仕組み
- **VS Code拡張**: YAML設定のシンタックスハイライトと補完機能
